#include <stdio.h>
#include <time.h> // 시트값
#include <stdlib.h> // rand함수 사용
#include <math.h>

void board_print(int a[3][3])
{
	for (int i = 0; i < 3; i++)
	{
		printf("|---|---|---\n");
		for (int j = 0; j < 3; j++)
		{
			if (a[i][j] > 0)
			{
				printf("|%c  ", a[i][j] < 1 ? 'o':'x'); // 1은 x 2는 o
			}
			else
			{
				printf("|%c  ", ' ');
			}
			if (j == 2)
			{
				printf("\n");
			}
		}
		
	}
}

int random()
{
	srand(time(NULL));
	return (rand() % 2)+1; // 1은 x 2는 o
}

void ai_turn(int a[3][3],int ai)
{
	int x, y;
	while (1)
	{
		x = rand() % 3;
		y = rand() % 3;
		if (a[x][y] == 0)
		{
			break;
		}
	}
	a[x][y] = ai;
}

int check(int a[3][3], int ai, int human)
{
	for (int i = 0; i < 3; i++)
	{
		if (a[i][0] + a[i][1] + a[i][2] == 15 || a[i][0] + a[i][1] + a[i][2] == 6) // 가로 확인
		{
			if (a[i][0] + a[i][1] + a[i][2] % ai == 0)
			{
				return ai;
			}
			else
			{
				return human;
			}
		}
	}
	for (int i = 0; i < 3; i++) 
	{
		if (a[0][i] + a[1][i] + a[2][i] == 15 || a[0][i] + a[1][i] + a[2][i] == 6) // 가로확인
		{
			if (a[0][i] + a[1][i] + a[2][i] % ai == 0)
			{
				return ai;
			}
			else
			{
				return human;
			}
		}
	}
	if (a[0][0] + a[1][1] + a[2][2] == 15 || a[0][0] + a[1][1] + a[2][2] == 6) // 가로확인
	{
		if (a[0][0] + a[1][1] + a[2][2] % ai == 0)
		{
			return ai;
		}
		else
		{
			return human;
		}
	}
	if (a[0][2] + a[1][1] + a[2][0] == 15 || a[0][2] + a[1][1] + a[2][0] == 6) // 가로확인
	{
		if (a[0][2] + a[1][1] + a[2][0] % ai == 0)
		{
			return ai;
		}
		else
		{
			return human;
		}
	}
}

int main()
{
	int ai;
	int human;
	int x = 0;
	int y = 0;
	int a[3][3] = { 0 };
	while (1)
	{
		ai = random();
		if (ai == 1)
		{
			ai = 2; //x
			human = 5; //o
		}
		else 
		{
			ai = 5; // o
			human = 2; //x
		}
		ai_turn(a, ai); //ai선으로 시작
		board_print(a); // 보드 출력
		printf("배열 좌표:");
		scanf_s("%d %d", &x, &y); // 원하는 위치 입력
		a[x][y] = human;
		if (check(a, ai, human) == ai)
		{
			printf("ai승리");
			break;
		}
		else if (check(a, ai, human) == human)
		{
			printf("사용자 승리");
			break;
		}
		else
		{
			printf("\n");
		}
	}
	return 0;
}
